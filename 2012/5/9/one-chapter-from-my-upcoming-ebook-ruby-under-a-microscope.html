<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>One Chapter From My Upcoming eBook: Ruby Under a Microscope - Pat Shaughnessy</title><meta name="description" content=""><meta name="author" content=""><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/assets/css/normalize.css"><link rel="stylesheet" href="/assets/css/skeleton.css"><link rel="alternate" type="application/atom+xml" title="Pat Shaughnessy - Feed" href="http://feeds2.feedburner.com/patshaughnessy"><link rel="icon" type="image/png" href="images/favicon.png"></head><body><div id="banner"><a href="/"><span id="title">Pat Shaughnessy</span><span id="tagline"> blogger, rubyist, aspiring author</span></a></div><div style="margin-top: 35px"><div class="ten columns"><div class="container"><div class="row"><article class="post"><header><h1>One Chapter From My Upcoming eBook: Ruby Under a Microscope</h1><div class="metadata">May 9th 2012&nbsp;&mdash;&nbsp;<a href="#disqus_thread" data-disqus-identifier="https://patshaughnessy.net/2012/5/9/one-chapter-from-my-upcoming-ebook-ruby-under-a-microscope">&nbsp; Comments and &nbsp; Reactions</a></div></header><section class="content"><div style="float: left; padding: 7px 30px 10px 0px">
<table cellpadding="0" cellspacing="0" border="0">
  <tr><td><img src="https://patshaughnessy.net/assets/2012/1/4/microscope.jpg"></td></tr>
  <tr><td align="center"><small><i>In my eBook I’ll explore Ruby internals<br/>using an experimental approach.</i></small></td></tr>
</table>
</div>
<p><b>Update:</b> I just setup an <a href="https://patshaughnessy.net/ruby-under-a-microscope">email sign up form</a> - if you give me your email address I'll send you one - count ’em - one email messsage when the eBook is finished.</p>
<p>You may have noticed I haven’t been blogging here for a while; instead I’ve been working on a new eBook about Ruby language internals. I find this topic fascinating! In fact many of my blog posts this year have been about how Ruby, JRuby and Rubinius actually work on the inside, “under the hood.” Instead of continuing to blog about it, I’ve decided to write an entire book which I plan to release this Fall. For now, I’m calling the book “<u>Ruby Under a Microscope - Learning Ruby Internals Through Experiment</u>.”</p>
<p>Today I’m excited to release a preview of one chapter of the eBook called “How Hashes Scale From One To One Million Elements.” Here’s a link to it:</p>
<p><a href="https://patshaughnessy.net/Ruby-Under-a-Microscope-Rough-Draft-May.pdf"><img src="https://patshaughnessy.net/assets/2012/5/9/pdficon_large.png"/></a> <a href="https://patshaughnessy.net/Ruby-Under-a-Microscope-Rough-Draft-May.pdf">Ruby Under A Microscope</a></p>
<p>I might release another chapter in the next couple of months, or at least some excerpts from the book as blog posts. Ultimately I might charge some money for the finished version. To hear when the book is finished and available, just follow me on Twitter and/or subscribe to my RSS feed.</p>
<p>It was a blast to write and I hope it will be a relatively quick, fun read for you. I realize it’s very long - at 41 pages you’ll probably have to put it on your “read-it-later” list. But if you’re interested in the topic of Ruby internals I’d love to know what you think about either the chapter’s writing style or content.
If you take the time to download and read it, here’s what you’ll find inside:</p>
<h2>Table of Contents</h2>
<ul>
  <li>Introduction</li>
  <ul>
    <li>Why bother to study Ruby internals?</a</li>
    <li>My approach in this book: theory and experiment</a></li>
  </ul>
  <li>How Hashes Scale From One To One Million Elements</a></li>
  <ul>
    <li>Theory: Hash tables in Ruby</a></li>
    <li>Experiment 1: Retrieving a value from hashes of varying sizes</a></li>
    <li>Theory: How hash tables expand to accommodate more values</a></li>
    <li>Experiment 2: Inserting one new element into hashes of varying sizes</a></li>
    <li>Theory: Why Hashes will be faster in Ruby 2.0</a></li>
    <li>Experiment 3: Inserting one new element into hashes of varying sizes, for Ruby 2.0</a></li>
    <li>Theory: How Ruby implements hash functions</a></li>
    <li>Experiment 4: Using objects as keys in a hash</a></li>
    <li>Theory: How Ruby saves order information in hashes</a></li>
    <li>Experiment 5: Iterating over elements inserted into a Hash</a></li>
    <li>Alternate theories: Hashes in JRuby</a></li>
    <li>Alternate theories: Hashes in Rubinius</a></li>
    <li>Conclusion</a></li>
    <li>Appendix: Experiment Code</a></li>
  </ul>
</ul>
<p>Many thanks a lot to everyone who read the “rough, rough draft” of this, and helped me refine my thinking and improve the text: Alex, Daniel, Rashmi, Peter, Mike, Jonathan and Amit.</p>
</section><section class="comments"><div id="disqus_thread"><script type="text/javascript">var disqus_identifier = 'https://patshaughnessy.net/2012/5/9/one-chapter-from-my-upcoming-ebook-ruby-under-a-microscope'; var disqus_shortname = 'patshaughnessy'; var disqus_title = 'One Chapter From My Upcoming eBook: Ruby Under a Microscope';</script></div><script type="text/javascript" src="https://disqus.com/forums/patshaughnessy/embed.js"></script><noscript><a href="https://patshaughnessy.disqus.com/?url=ref">View the discussion thread.</a></noscript></section></article></div></div></div><div class="two columns"><div id="sidebar"><img src="/assets/images/pat.jpg"></img><div class="header">Subscribe</div><div class="links"><ul><li><a id="feed" href="http://feeds.feedburner.com/patshaughnessy"><img src="/assets/images/feed-icon16x16B.png"></img></a><a href="http://twitter.com/pat_shaughnessy"><img width="20" height="20" src="/assets/images/twitter.svg"></img></a></li></ul></div><div class="header">Buy My Book</div><div class="links"><ul><li><a href="/ruby-under-a-microscope"><img src="/assets/images/book-cover.png"></img></a></li><li id="eBook"><a href="/ruby-under-a-microscope">Ruby Under a Microscope</a></li></ul></div><div class="header">More on Ruby</div><div class="links"><ul><li><a href="/2016/10/7/need-a-second-opinion-on-your-ruby-code-ask-crystal">Need a Second Opinion on Your Ruby Code? Ask Crystal</a></li><li><a href="/2016/4/2/two-dumb-ruby-mistakes">Two Dumb Ruby Mistakes</a></li><li><a href="/2015/6/18/dont-let-your-data-out-of-the-database">Don’t Let Your Data Out of the Database</a></li><li><a href="/2015/2/16/mark-methods-private-when-you-dont-test-them">Mark Methods Private When You Don’t Test Them</a></li></ul></div><div class="header">Popular</div><div class="links"><ul><li><a href="/2016/11/26/learning-to-read-x86-assembly-language">Learning to Read x86 Assembly Language</a></li><li><a href="/2012/1/4/never-create-ruby-strings-longer-than-23-characters">Never create Ruby strings longer than 23 characters</a></li><li><a href="/2012/3/23/why-you-should-be-excited-about-garbage-collection-in-ruby-2-0">Why You Should Be Excited About Garbage Collection in Ruby 2.0</a></li><li><a href="/2013/4/3/ruby-2-0-works-hard-so-you-can-be-lazy">Ruby 2.0 Works Hard So You Can Be Lazy</a></li></ul></div><div class="header"><a href="/">More...</a></div></div></div><script type="text/javascript">(function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());</script></div><div id="footer" class="ten columns"><p>Content and UI design &copy; 2008-2022 Pat Shaughnessy</p></div></body></html>